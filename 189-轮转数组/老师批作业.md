## åˆæ¬¡æäº¤ä»£ç 

```c
void rotate(int* nums, int numsSize, int k) {
    int *b[numsSize+k];
    for(int i=0;i<k;i++){
        b[i]=nums[numsSize-k-i];
    }for(int i=k;i<numsSize;i++){
        b[i]=nums[i-k];
    }
    *nums=&b;
}
```

## æ‰¹é˜…æ„è§

1. `int *b[numsSize+k];` å£°æ˜çš„æ˜¯**æŒ‡é’ˆæ•°ç»„**è€Œä¸æ˜¯æ•´æ•°æ•°ç»„ï¼Œåº”æ”¹ä¸º `int b[numsSize]` æˆ–ä½¿ç”¨åŠ¨æ€åˆ†é… `int *b = (int*)malloc(sizeof(int) * numsSize);`ã€‚æ•°ç»„å¤§å°åº”ä¸º `numsSize`ï¼Œä¸éœ€è¦ `+k`ã€‚
2. `b[i]=nums[numsSize-k-i]` çš„ç´¢å¼•è®¡ç®—æœ‰è¯¯ã€‚å½“ i=0 æ—¶è®¿é—® `nums[4]` æ­£ç¡®ï¼Œä½†å½“ i=1 æ—¶è®¿é—® `nums[3]` é”™è¯¯ï¼Œåº”è¯¥æ˜¯ `nums[5]`ã€‚æ­£ç¡®çš„ç´¢å¼•åº”ä¸º `nums[numsSize - k + i]`ï¼ˆéœ€å…ˆå¤„ç† k >= numsSize çš„æƒ…å†µï¼‰ã€‚
3. æœªå¤„ç† `k >= numsSize` çš„æƒ…å†µã€‚å½“ k å¤§äºç­‰äºæ•°ç»„é•¿åº¦æ—¶ï¼Œè½®è½¬ k æ¬¡ç­‰ä»·äºè½®è½¬ `k % numsSize` æ¬¡ã€‚ä¾‹å¦‚ï¼šæ•°ç»„é•¿åº¦ä¸º 7ï¼Œè½®è½¬ 10 æ¬¡ç­‰ä»·äºè½®è½¬ 3 æ¬¡ã€‚
4. `*nums=&b;` èµ‹å€¼æ–¹å¼å®Œå…¨é”™è¯¯ã€‚`*nums` æ˜¯è§£å¼•ç”¨å¾—åˆ° `nums[0]` çš„å€¼ï¼ˆæ•´æ•°ï¼‰ï¼Œä¸èƒ½èµ‹å€¼ä¸ºåœ°å€ï¼›`&b` æ˜¯æ•°ç»„åœ°å€ï¼Œç±»å‹ä¸åŒ¹é…ï¼›å³ä½¿ç±»å‹åŒ¹é…ï¼Œè¿™æ ·ä¹Ÿæ— æ³•å°† `b` æ•°ç»„å†…å®¹å¤åˆ¶åˆ° `nums`ã€‚åº”ä½¿ç”¨å¾ªç¯é€ä¸ªå¤åˆ¶æˆ– `memcpy`ã€‚
5. ä½¿ç”¨äº†é¢å¤–çš„æ•°ç»„ `b`ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n)ï¼Œä¸ç¬¦åˆé¢˜ç›®è¿›é˜¶è¦æ±‚çš„ O(1) åŸåœ°ç®—æ³•ã€‚

## æ”¹è¿›å»ºè®®

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è¾…åŠ©æ•°ç»„ï¼ˆO(n) æ—¶é—´ O(n) ç©ºé—´ï¼‰

```c
void rotate(int* nums, int numsSize, int k) {
    // å¤„ç† k >= numsSize çš„æƒ…å†µ
    k = k % numsSize;
    
    // åˆ›å»ºè¾…åŠ©æ•°ç»„
    int *temp = (int*)malloc(sizeof(int) * numsSize);
    
    // å¤åˆ¶å k ä¸ªå…ƒç´ åˆ°å‰ k ä¸ªä½ç½®
    for (int i = 0; i < k; i++) {
        temp[i] = nums[numsSize - k + i];
    }
    
    // å¤åˆ¶å‰ n-k ä¸ªå…ƒç´ åˆ°å n-k ä¸ªä½ç½®
    for (int i = k; i < numsSize; i++) {
        temp[i] = nums[i - k];
    }
    
    // å°†ç»“æœå¤åˆ¶å›åŸæ•°ç»„
    for (int i = 0; i < numsSize; i++) {
        nums[i] = temp[i];
    }
    
    free(temp);
}
```

**æˆ–è€…ä½¿ç”¨æ ˆæ•°ç»„ï¼ˆå¦‚æœæ•°ç»„å¤§å°ä¸å¤§ï¼‰ï¼š**

```c
void rotate(int* nums, int numsSize, int k) {
    k = k % numsSize;
    int temp[numsSize];
    
    for (int i = 0; i < numsSize; i++) {
        temp[(i + k) % numsSize] = nums[i];
    }
    
    for (int i = 0; i < numsSize; i++) {
        nums[i] = temp[i];
    }
}
```

### æ–¹æ³•äºŒï¼šä¸‰æ¬¡åè½¬æ³•ï¼ˆæ¨èï¼ŒO(n) æ—¶é—´ O(1) ç©ºé—´ï¼‰

```c
// åè½¬æ•°ç»„çš„è¾…åŠ©å‡½æ•°
void reverse(int* nums, int start, int end) {
    while (start < end) {
        int temp = nums[start];
        nums[start] = nums[end];
        nums[end] = temp;
        start++;
        end--;
    }
}

void rotate(int* nums, int numsSize, int k) {
    k = k % numsSize;
    
    // åè½¬æ•´ä¸ªæ•°ç»„
    reverse(nums, 0, numsSize - 1);
    // åè½¬å‰ k ä¸ªå…ƒç´ 
    reverse(nums, 0, k - 1);
    // åè½¬å n-k ä¸ªå…ƒç´ 
    reverse(nums, k, numsSize - 1);
}
```

**ç¤ºä¾‹è¯´æ˜ï¼ˆnums = [1,2,3,4,5,6,7], k = 3ï¼‰ï¼š**
1. åè½¬æ•´ä¸ªæ•°ç»„ï¼š`[7,6,5,4,3,2,1]`
2. åè½¬å‰ 3 ä¸ªï¼š`[5,6,7,4,3,2,1]`
3. åè½¬å 4 ä¸ªï¼š`[5,6,7,1,2,3,4]` âœ“

**ä¼˜ç‚¹**ï¼š
- æ—¶é—´å¤æ‚åº¦ O(n)
- ç©ºé—´å¤æ‚åº¦ O(1)ï¼ŒåŸåœ°ç®—æ³•
- ä»£ç ç®€æ´ä¼˜é›…

### æ–¹æ³•ä¸‰ï¼šç¯çŠ¶æ›¿æ¢æ³•ï¼ˆO(n) æ—¶é—´ O(1) ç©ºé—´ï¼‰

```c
void rotate(int* nums, int numsSize, int k) {
    k = k % numsSize;
    int count = 0;  // è®°å½•å·²å¤„ç†çš„å…ƒç´ ä¸ªæ•°
    
    for (int start = 0; count < numsSize; start++) {
        int current = start;
        int prev = nums[start];
        
        do {
            int next = (current + k) % numsSize;
            int temp = nums[next];
            nums[next] = prev;
            prev = temp;
            current = next;
            count++;
        } while (start != current);
    }
}
```

**è¯´æ˜**ï¼š
- å°†æ•°ç»„çœ‹ä½œä¸€ä¸ªç¯ï¼Œæ¯ä¸ªå…ƒç´ ç§»åŠ¨åˆ° `(i + k) % numsSize` çš„ä½ç½®
- ä½¿ç”¨ `do-while` å¾ªç¯å¤„ç†æ¯ä¸ªç¯ï¼Œç›´åˆ°å›åˆ°èµ·ç‚¹
- å¦‚æœæ•°ç»„é•¿åº¦å’Œ k çš„æœ€å¤§å…¬çº¦æ•°å¤§äº 1ï¼Œä¼šæœ‰å¤šä¸ªç¯

### æ–¹æ³•å››ï¼šä½¿ç”¨ memcpyï¼ˆO(n) æ—¶é—´ O(n) ç©ºé—´ï¼‰

```c
void rotate(int* nums, int numsSize, int k) {
    k = k % numsSize;
    int *temp = (int*)malloc(sizeof(int) * numsSize);
    
    // å¤åˆ¶å k ä¸ªå…ƒç´ 
    memcpy(temp, nums + numsSize - k, k * sizeof(int));
    // å¤åˆ¶å‰ n-k ä¸ªå…ƒç´ 
    memcpy(temp + k, nums, (numsSize - k) * sizeof(int));
    // å¤åˆ¶å›åŸæ•°ç»„
    memcpy(nums, temp, numsSize * sizeof(int));
    
    free(temp);
}
```

## æ€»ç»“

åŸä»£ç çš„ä¸»è¦é—®é¢˜ï¼š
1. **æ•°ç»„å£°æ˜é”™è¯¯**ï¼šä½¿ç”¨äº†æŒ‡é’ˆæ•°ç»„è€Œä¸æ˜¯æ•´æ•°æ•°ç»„
2. **ç´¢å¼•è®¡ç®—é”™è¯¯**ï¼šè½®è½¬é€»è¾‘çš„ç´¢å¼•è®¡ç®—ä¸æ­£ç¡®
3. **èµ‹å€¼æ–¹å¼é”™è¯¯**ï¼š`*nums=&b;` æ— æ³•å°†è¾…åŠ©æ•°ç»„å†…å®¹å¤åˆ¶åˆ°åŸæ•°ç»„
4. **æœªå¤„ç†è¾¹ç•Œæƒ…å†µ**ï¼šæ²¡æœ‰å¤„ç† k >= numsSize çš„æƒ…å†µ
5. **ç©ºé—´å¤æ‚åº¦ä¸ç¬¦åˆè¦æ±‚**ï¼šä½¿ç”¨äº† O(n) é¢å¤–ç©ºé—´ï¼Œä¸ç¬¦åˆè¿›é˜¶è¦æ±‚

**å»ºè®®**ï¼š
- **ä¼˜å…ˆæŒæ¡ä¸‰æ¬¡åè½¬æ³•**ï¼Œè¿™æ˜¯æœ€ä¼˜é›…çš„ O(1) ç©ºé—´è§£æ³•
- å¦‚æœä½¿ç”¨è¾…åŠ©æ•°ç»„æ–¹æ³•ï¼Œè¦æ­£ç¡®å¤„ç†æ•°ç»„å£°æ˜ã€ç´¢å¼•è®¡ç®—å’Œå…ƒç´ å¤åˆ¶
- è®°ä½ï¼šè½®è½¬ k æ¬¡ç­‰ä»·äºè½®è½¬ `k % numsSize` æ¬¡

---

## ç¬¬äºŒæ¬¡æäº¤ä»£ç 

```c
void fanzhuan(int* a,int start,int end){
    int slow;
    int fast;
    for(int i=start;i<=end;i++){
        slow=i;
        fast=end-i;
        int daiding = a[slow];
        a[slow]=a[fast];
        a[fast]=daiding;
    }
}

void rotate(int* nums, int numsSize, int k) {
    k=k%numsSize;
    fanzhuan(nums,0,numsSize-1);
    fanzhuan(nums,0,k-1);
    fanzhuan(nums,k,numsSize);
}
```

## æ‰¹é˜…æ„è§

### âœ… è¿›æ­¥ç‚¹

1. **æ€è·¯æ­£ç¡®**ï¼šé‡‡ç”¨äº†ä¸‰æ¬¡åè½¬æ³•ï¼Œè¿™æ˜¯ O(1) ç©ºé—´çš„ä¼˜ç§€è§£æ³•ï¼
2. **è¾¹ç•Œå¤„ç†æ­£ç¡®**ï¼š`k=k%numsSize` æ­£ç¡®å¤„ç†äº† k >= numsSize çš„æƒ…å†µã€‚
3. **æ•´ä½“é€»è¾‘æ­£ç¡®**ï¼šä¸‰æ¬¡åè½¬çš„é¡ºåºå’Œæ€è·¯éƒ½æ˜¯å¯¹çš„ã€‚

### âŒ é—®é¢˜åˆ†æ

1. **`fanzhuan` å‡½æ•°çš„ç´¢å¼•è®¡ç®—é”™è¯¯**ï¼š
   - `fast=end-i` è¿™ä¸ªè®¡ç®—æ˜¯é”™è¯¯çš„ï¼Œä¼šå¯¼è‡´**é‡å¤äº¤æ¢**å…ƒç´ 
   - ä¾‹å¦‚ï¼šåè½¬ `[1,2,3,4,5]`ï¼ˆstart=0, end=4ï¼‰
     - i=0: slow=0, fast=4ï¼Œäº¤æ¢ a[0] å’Œ a[4] â†’ `[5,2,3,4,1]` âœ“
     - i=1: slow=1, fast=3ï¼Œäº¤æ¢ a[1] å’Œ a[3] â†’ `[5,4,3,2,1]` âœ“
     - i=2: slow=2, fast=2ï¼Œäº¤æ¢ a[2] å’Œ a[2]ï¼ˆè‡ªå·±å’Œè‡ªå·±äº¤æ¢ï¼‰â†’ `[5,4,3,2,1]` âœ“
     - i=3: slow=3, fast=1ï¼Œäº¤æ¢ a[3] å’Œ a[1] â†’ `[5,2,3,4,1]` âœ— **é”™è¯¯ï¼åˆæŠŠä¹‹å‰äº¤æ¢çš„æ¢å›å»äº†**
     - i=4: slow=4, fast=0ï¼Œäº¤æ¢ a[4] å’Œ a[0] â†’ `[1,2,3,4,5]` âœ— **é”™è¯¯ï¼åˆæ¢å›åŸæ ·äº†**
   - **æ­£ç¡®çš„åšæ³•**ï¼šåº”è¯¥ä½¿ç”¨åŒæŒ‡é’ˆä»ä¸¤ç«¯å‘ä¸­é—´ç§»åŠ¨ï¼Œæˆ–è€…åªéå†åˆ°ä¸­é—´ä½ç½®
   - æ­£ç¡®çš„ç´¢å¼•è®¡ç®—åº”è¯¥æ˜¯ï¼š`fast = start + end - i`ï¼ˆä½†è¿™æ ·ä»ç„¶ä¼šé‡å¤äº¤æ¢ï¼‰

2. **`rotate` å‡½æ•°ä¸­æ•°ç»„è¶Šç•Œ**ï¼š
   - `fanzhuan(nums,k,numsSize)` ä¸­çš„ `numsSize` ä¼šå¯¼è‡´æ•°ç»„è¶Šç•Œ
   - æ•°ç»„ç´¢å¼•èŒƒå›´æ˜¯ `[0, numsSize-1]`ï¼Œæœ€åä¸€ä¸ªæœ‰æ•ˆç´¢å¼•æ˜¯ `numsSize-1`
   - åº”è¯¥æ”¹ä¸ºï¼š`fanzhuan(nums,k,numsSize-1)`

### ğŸ” æ­£ç¡®çš„åè½¬å‡½æ•°å®ç°

åè½¬å‡½æ•°åº”è¯¥ä½¿ç”¨**åŒæŒ‡é’ˆä»ä¸¤ç«¯å‘ä¸­é—´ç§»åŠ¨**ï¼Œè€Œä¸æ˜¯ç”¨ for å¾ªç¯éå†æ‰€æœ‰ä½ç½®ï¼š

```c
void fanzhuan(int* a, int start, int end) {
    while (start < end) {
        int temp = a[start];
        a[start] = a[end];
        a[end] = temp;
        start++;
        end--;
    }
}
```

**æˆ–è€…ä½¿ç”¨ for å¾ªç¯ï¼ˆä½†éœ€è¦æ­£ç¡®è®¡ç®—å¾ªç¯æ¬¡æ•°ï¼‰ï¼š**

```c
void fanzhuan(int* a, int start, int end) {
    int mid = (start + end) / 2;
    for (int i = start; i <= mid; i++) {
        int j = start + end - i;
        if (i < j) {  // é¿å…ä¸­é—´å…ƒç´ è‡ªå·±å’Œè‡ªå·±äº¤æ¢
            int temp = a[i];
            a[i] = a[j];
            a[j] = temp;
        }
    }
}
```

### âœ… ä¿®æ­£åçš„å®Œæ•´ä»£ç 

```c
void fanzhuan(int* a, int start, int end) {
    while (start < end) {
        int temp = a[start];
        a[start] = a[end];
        a[end] = temp;
        start++;
        end--;
    }
}

void rotate(int* nums, int numsSize, int k) {
    k = k % numsSize;
    fanzhuan(nums, 0, numsSize - 1);
    fanzhuan(nums, 0, k - 1);
    fanzhuan(nums, k, numsSize - 1);  // æ³¨æ„ï¼šè¿™é‡Œæ˜¯ numsSize-1ï¼Œä¸æ˜¯ numsSize
}
```

## æ€»ç»“

ç¬¬äºŒæ¬¡æäº¤çš„è¿›æ­¥ï¼š
- âœ… é‡‡ç”¨äº†æ­£ç¡®çš„ç®—æ³•æ€è·¯ï¼ˆä¸‰æ¬¡åè½¬æ³•ï¼‰
- âœ… æ­£ç¡®å¤„ç†äº†è¾¹ç•Œæƒ…å†µï¼ˆk % numsSizeï¼‰
- âœ… ç†è§£äº†é¢˜ç›®çš„æ ¸å¿ƒæ€æƒ³

éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼š
- âŒ åè½¬å‡½æ•°çš„å®ç°æœ‰è¯¯ï¼Œå¯¼è‡´é‡å¤äº¤æ¢å…ƒç´ 
- âŒ æ•°ç»„ç´¢å¼•è¶Šç•Œï¼ˆ`numsSize` åº”è¯¥æ˜¯ `numsSize-1`ï¼‰

**å»ºè®®**ï¼š
- æŒæ¡åŒæŒ‡é’ˆæŠ€å·§ï¼šåè½¬æ•°ç»„æ—¶ä½¿ç”¨ `while (start < end)` ä»ä¸¤ç«¯å‘ä¸­é—´ç§»åŠ¨
- æ³¨æ„æ•°ç»„ç´¢å¼•è¾¹ç•Œï¼šæ•°ç»„æœ€åä¸€ä¸ªç´¢å¼•æ˜¯ `length-1`ï¼Œä¸æ˜¯ `length`
- å¤šæµ‹è¯•è¾¹ç•Œæƒ…å†µï¼šç©ºæ•°ç»„ã€å•å…ƒç´ æ•°ç»„ã€k=0 ç­‰æƒ…å†µ

