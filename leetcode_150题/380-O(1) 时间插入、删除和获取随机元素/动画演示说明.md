# 动画演示使用说明

## 🎬 如何运行动画

1. **安装依赖**

```bash
pip install matplotlib numpy
```

2. **运行程序**

```bash
python 动画演示.py
```

3. **选择示例**

程序提供三个内置选项：

- 选项 1：官方示例  
  操作序列：`insert(1), remove(2), insert(2), getRandom(), remove(1), insert(2), getRandom()`

- 选项 2：插入多个元素后删除  
  操作序列：`insert(1), insert(2), insert(3), insert(4), getRandom(), remove(2), getRandom(), remove(1), getRandom()`

- 选项 3：自定义操作序列（支持任意操作序列）

---

## 🎮 手动控制方式

| 按键 | 功能 |
|------|------|
| 空格 / → / Enter | 下一步 |
| ← | 上一步 |
| Home | 跳转到第一步 |
| End | 跳转到最后一步 |
| Q / Esc | 退出程序 |

> ⚠️ 使用键盘前，请先点击动画窗口以确保焦点在窗口上。

---

## 📊 动画元素说明

- **蓝色区域**：数组 `nums` 中存储的元素
- **绿色高亮**：当前操作涉及的元素位置
- **黄色区域**：哈希表 `valToIndex` 中的映射项
- **灰色区域**：数组中的空位置
- **代码高亮**：当前执行的代码行（右侧代码面板）

---

## 🔁 动画流程

1. **初始化**：展示空的 `nums` 数组和 `valToIndex` 哈希表
2. **插入操作**：
   - 检查元素是否已存在（查看哈希表）
   - 如果不存在，添加到数组末尾
   - 在哈希表中记录值到索引的映射
3. **删除操作**：
   - 检查元素是否存在（查看哈希表）
   - 如果存在，找到其在数组中的位置
   - 将数组最后一个元素移动到要删除的位置
   - 更新哈希表中被移动元素的映射
   - 删除数组最后一个元素和哈希表中的映射
4. **随机获取操作**：
   - 生成随机索引
   - 返回数组中对应位置的元素
5. **结束提示**：展示最终的数据结构状态

---

## 💡 学习建议

1. **第一次观看**：选择示例 1，观察插入、删除、随机获取的完整流程
2. **第二次**：尝试示例 2，重点观察删除操作时如何交换元素
3. **第三次**：输入自定义测试，例如连续插入多个元素，然后删除中间的元素
4. **最后**：配合 `教学文档.md` 理解为什么需要哈希表+数组的组合

---

## 🎯 重点观察

1. **插入操作**：
   - 为什么插入到数组末尾？因为 O(1) 时间复杂度
   - 为什么需要哈希表？为了快速判断元素是否存在

2. **删除操作**：
   - 为什么要交换到末尾？因为删除末尾元素是 O(1)
   - 为什么需要更新哈希表？因为元素位置发生了变化

3. **随机获取操作**：
   - 为什么使用数组而不是哈希表？因为数组支持 O(1) 随机访问
   - 为什么每个元素概率相等？因为数组是连续存储的

---

## ❓ 常见问题

- **键盘无响应？**  
  请确保点击动画窗口使其获得焦点。如果仍无效，尝试重新运行或切换 Python 终端。

- **中文显示异常？**  
  修改脚本中的 `plt.rcParams['font.sans-serif']`，换成系统可用字体。

- **无法显示窗口？**  
  在无图形界面的环境中，可以使用 `plt.savefig` 导出每一步，但更推荐在本地运行。

- **为什么删除时要交换？**  
  如果直接删除中间元素，需要移动后续所有元素，时间复杂度变为 O(n)。交换到末尾后删除，只需要 O(1) 时间。

---

**祝学习顺利，玩得开心！** 🎉

