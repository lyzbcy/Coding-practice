# LeetCode 189. è½®è½¬æ•°ç»„ - è¯¦ç»†æ•™å­¦æ–‡æ¡£

## ğŸ“š ç›®å½•

1. [é—®é¢˜åˆ†æ](#é—®é¢˜åˆ†æ)
2. [æ€è·¯è§£æ](#æ€è·¯è§£æ)
3. [ç®—æ³•è¯¦è§£](#ç®—æ³•è¯¦è§£)
4. [ä»£ç å®ç°](#ä»£ç å®ç°)
5. [å¤æ‚åº¦åˆ†æ](#å¤æ‚åº¦åˆ†æ)
6. [å¸¸è§é”™è¯¯](#å¸¸è§é”™è¯¯)
7. [æ‰©å±•æ€è€ƒ](#æ‰©å±•æ€è€ƒ)

---

## é—®é¢˜åˆ†æ

### é¢˜ç›®è¦æ±‚

- ç»™å®šæ•°ç»„ `nums` å’Œéè´Ÿæ•´æ•° `k`
- å°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³è½®è½¬ `k` ä¸ªä½ç½®
- å¿…é¡»**åŸåœ°ä¿®æ”¹**æ•°ç»„ï¼Œä¸èƒ½ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼ˆè¿›é˜¶è¦æ±‚ï¼‰

### å…³é”®çº¦æŸ

1. **å¿…é¡»åŸåœ°å®Œæˆ**ï¼Œè¿›é˜¶è¦æ±‚é¢å¤–ç©ºé—´å¤æ‚åº¦ O(1)
2. **k å¯èƒ½å¤§äºæ•°ç»„é•¿åº¦**ï¼Œéœ€è¦å…ˆå–æ¨¡ï¼š`k = k % numsSize`
3. `nums.length` æœ€å¤š 10^5ï¼Œéœ€è¦ O(n) æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•

### ç¤ºä¾‹ç†è§£

ä»¥ `nums = [1,2,3,4,5,6,7]`, `k = 3` ä¸ºä¾‹ï¼š

- åŸæ•°ç»„ï¼š`[1,2,3,4,5,6,7]`
- è½®è½¬åï¼š`[5,6,7,1,2,3,4]`
- å 3 ä¸ªå…ƒç´  `[5,6,7]` ç§»åŠ¨åˆ°å‰é¢
- å‰ 4 ä¸ªå…ƒç´  `[1,2,3,4]` ç§»åŠ¨åˆ°åé¢

---

## æ€è·¯è§£æ

### é”™è¯¯ç›´è§‰ âŒ

- **é€ä¸ªç§»åŠ¨ k æ¬¡**ï¼šæ¯æ¬¡å‘å³ç§»åŠ¨ 1 ä½ï¼Œé‡å¤ k æ¬¡ã€‚æ—¶é—´å¤æ‚åº¦ O(nÃ—k)ï¼Œå½“ k å¾ˆå¤§æ—¶æ•ˆç‡æä½
- **ä½¿ç”¨é¢å¤–æ•°ç»„ä½†ä¸å¤„ç† k >= n çš„æƒ…å†µ**ï¼šç›´æ¥å¤åˆ¶ä¼šå¯¼è‡´ç´¢å¼•è¶Šç•Œ
- **ç›´æ¥äº¤æ¢å…ƒç´ **ï¼šæ²¡æœ‰æ¸…æ™°çš„äº¤æ¢ç­–ç•¥ï¼Œå®¹æ˜“å‡ºé”™

### æ­£ç¡®æ€è·¯ âœ…

æœ¬é¢˜æœ‰å¤šç§è§£æ³•ï¼Œæ¨èæŒæ¡ä»¥ä¸‹ä¸‰ç§ï¼š

#### æ–¹æ³•ä¸€ï¼šä¸‰æ¬¡åè½¬æ³•ï¼ˆæ¨èï¼‰â­

**æ ¸å¿ƒæ€æƒ³**ï¼šé€šè¿‡ä¸‰æ¬¡åè½¬å®ç°è½®è½¬

1. åè½¬æ•´ä¸ªæ•°ç»„
2. åè½¬å‰ k ä¸ªå…ƒç´ 
3. åè½¬å n-k ä¸ªå…ƒç´ 

**ç¤ºä¾‹**ï¼ˆ`nums = [1,2,3,4,5,6,7]`, `k = 3`ï¼‰ï¼š
- æ­¥éª¤ 1ï¼šåè½¬æ•´ä¸ªæ•°ç»„ â†’ `[7,6,5,4,3,2,1]`
- æ­¥éª¤ 2ï¼šåè½¬å‰ 3 ä¸ª â†’ `[5,6,7,4,3,2,1]`
- æ­¥éª¤ 3ï¼šåè½¬å 4 ä¸ª â†’ `[5,6,7,1,2,3,4]` âœ“

#### æ–¹æ³•äºŒï¼šç¯çŠ¶æ›¿æ¢æ³•

**æ ¸å¿ƒæ€æƒ³**ï¼šå°†æ•°ç»„çœ‹ä½œä¸€ä¸ªç¯ï¼Œæ¯ä¸ªå…ƒç´ ç§»åŠ¨åˆ° `(i + k) % n` çš„ä½ç½®

- ä»ä½ç½® 0 å¼€å§‹ï¼Œå°†å…ƒç´ æ”¾åˆ°ç›®æ ‡ä½ç½®
- ç›®æ ‡ä½ç½®çš„å…ƒç´ å†æ”¾åˆ°å®ƒçš„ç›®æ ‡ä½ç½®
- é‡å¤ç›´åˆ°å›åˆ°èµ·ç‚¹ï¼Œå½¢æˆä¸€ä¸ªç¯
- å¦‚æœè¿˜æœ‰æœªå¤„ç†çš„å…ƒç´ ï¼Œä»ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹æ–°çš„ç¯

#### æ–¹æ³•ä¸‰ï¼šè¾…åŠ©æ•°ç»„æ³•

**æ ¸å¿ƒæ€æƒ³**ï¼šä½¿ç”¨é¢å¤–æ•°ç»„å­˜å‚¨ç»“æœï¼Œç„¶åå¤åˆ¶å›åŸæ•°ç»„

- å k ä¸ªå…ƒç´  â†’ æ–°æ•°ç»„å‰ k ä¸ªä½ç½®
- å‰ n-k ä¸ªå…ƒç´  â†’ æ–°æ•°ç»„å n-k ä¸ªä½ç½®

---

## ç®—æ³•è¯¦è§£

### æ–¹æ³•ä¸€ï¼šä¸‰æ¬¡åè½¬æ³•ï¼ˆæ¨èï¼‰

#### ç®—æ³•æ­¥éª¤

1. **å¤„ç†è¾¹ç•Œæƒ…å†µ**ï¼š`k = k % numsSize`ï¼ˆå½“ k >= n æ—¶ï¼‰
2. **åè½¬æ•´ä¸ªæ•°ç»„**ï¼š`reverse(nums, 0, n-1)`
3. **åè½¬å‰ k ä¸ªå…ƒç´ **ï¼š`reverse(nums, 0, k-1)`
4. **åè½¬å n-k ä¸ªå…ƒç´ **ï¼š`reverse(nums, k, n-1)`

#### ä¸ºä»€ä¹ˆè¿™æ ·æœ‰æ•ˆï¼Ÿ

å‡è®¾åŸæ•°ç»„ä¸º `[a1, a2, ..., ak, ak+1, ..., an]`ï¼Œç›®æ ‡ä¸º `[ak+1, ..., an, a1, ..., ak]`

1. åè½¬æ•´ä¸ªæ•°ç»„ï¼š`[an, ..., ak+1, ak, ..., a1]`
2. åè½¬å‰ k ä¸ªï¼š`[ak+1, ..., an, ak, ..., a1]`
3. åè½¬å n-k ä¸ªï¼š`[ak+1, ..., an, a1, ..., ak]` âœ“

#### ä¼ªä»£ç 

```
function rotate(nums, n, k):
    k = k % n
    reverse(nums, 0, n-1)
    reverse(nums, 0, k-1)
    reverse(nums, k, n-1)

function reverse(nums, start, end):
    while start < end:
        swap(nums[start], nums[end])
        start++
        end--
```

### æ–¹æ³•äºŒï¼šç¯çŠ¶æ›¿æ¢æ³•

#### ç®—æ³•æ­¥éª¤

1. **å¤„ç†è¾¹ç•Œæƒ…å†µ**ï¼š`k = k % numsSize`
2. **è®°å½•å·²å¤„ç†å…ƒç´ ä¸ªæ•°**ï¼š`count = 0`
3. **ä»ä½ç½® 0 å¼€å§‹**ï¼š
   - ä¿å­˜å½“å‰ä½ç½®çš„å€¼ `prev = nums[start]`
   - è®¡ç®—ç›®æ ‡ä½ç½® `next = (current + k) % n`
   - å°†ç›®æ ‡ä½ç½®çš„å€¼ä¿å­˜ï¼Œå°† `prev` æ”¾å…¥ç›®æ ‡ä½ç½®
   - ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®ï¼Œç»§ç»­å¤„ç†
   - ç›´åˆ°å›åˆ°èµ·ç‚¹
4. **å¦‚æœè¿˜æœ‰æœªå¤„ç†çš„å…ƒç´ **ï¼Œä»ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹æ–°çš„ç¯

#### ä¸ºä»€ä¹ˆéœ€è¦å¤šä¸ªç¯ï¼Ÿ

å½“ `gcd(n, k) > 1` æ—¶ï¼Œä¼šæœ‰å¤šä¸ªç‹¬ç«‹çš„ç¯ã€‚ä¾‹å¦‚ï¼š
- `n = 6, k = 2`ï¼šç¯ 1: 0â†’2â†’4â†’0ï¼Œç¯ 2: 1â†’3â†’5â†’1

#### ä¼ªä»£ç 

```
count = 0
for start = 0 to n-1:
    if count >= n: break
    current = start
    prev = nums[start]
    do:
        next = (current + k) % n
        temp = nums[next]
        nums[next] = prev
        prev = temp
        current = next
        count++
    while current != start
```

### æ–¹æ³•ä¸‰ï¼šè¾…åŠ©æ•°ç»„æ³•

#### ç®—æ³•æ­¥éª¤

1. **å¤„ç†è¾¹ç•Œæƒ…å†µ**ï¼š`k = k % numsSize`
2. **åˆ›å»ºè¾…åŠ©æ•°ç»„**ï¼š`temp[n]`
3. **å¤åˆ¶å k ä¸ªå…ƒç´ **åˆ°å‰ k ä¸ªä½ç½®
4. **å¤åˆ¶å‰ n-k ä¸ªå…ƒç´ **åˆ°å n-k ä¸ªä½ç½®
5. **å¤åˆ¶å›åŸæ•°ç»„**

#### ä¼ªä»£ç 

```
k = k % n
temp = new array[n]
for i = 0 to k-1:
    temp[i] = nums[n - k + i]
for i = k to n-1:
    temp[i] = nums[i - k]
for i = 0 to n-1:
    nums[i] = temp[i]
```

---

## ä»£ç å®ç°

### æ–¹æ³•ä¸€ï¼šä¸‰æ¬¡åè½¬æ³•ï¼ˆC è¯­è¨€ï¼‰

```c
// åè½¬æ•°ç»„çš„è¾…åŠ©å‡½æ•°
void reverse(int* nums, int start, int end) {
    while (start < end) {
        int temp = nums[start];
        nums[start] = nums[end];
        nums[end] = temp;
        start++;
        end--;
    }
}

void rotate(int* nums, int numsSize, int k) {
    // å¤„ç† k >= numsSize çš„æƒ…å†µ
    k = k % numsSize;
    
    // åè½¬æ•´ä¸ªæ•°ç»„
    reverse(nums, 0, numsSize - 1);
    // åè½¬å‰ k ä¸ªå…ƒç´ 
    reverse(nums, 0, k - 1);
    // åè½¬å n-k ä¸ªå…ƒç´ 
    reverse(nums, k, numsSize - 1);
}
```

### æ–¹æ³•ä¸€ï¼šä¸‰æ¬¡åè½¬æ³•ï¼ˆC++ï¼‰

```cpp
class Solution {
public:
    void rotate(vector<int>& nums, int k) {
        int n = nums.size();
        k = k % n;
        
        reverse(nums.begin(), nums.end());
        reverse(nums.begin(), nums.begin() + k);
        reverse(nums.begin() + k, nums.end());
    }
};
```

### æ–¹æ³•äºŒï¼šç¯çŠ¶æ›¿æ¢æ³•ï¼ˆC è¯­è¨€ï¼‰

```c
void rotate(int* nums, int numsSize, int k) {
    k = k % numsSize;
    int count = 0;  // è®°å½•å·²å¤„ç†çš„å…ƒç´ ä¸ªæ•°
    
    for (int start = 0; count < numsSize; start++) {
        int current = start;
        int prev = nums[start];
        
        do {
            int next = (current + k) % numsSize;
            int temp = nums[next];
            nums[next] = prev;
            prev = temp;
            current = next;
            count++;
        } while (start != current);
    }
}
```

### æ–¹æ³•ä¸‰ï¼šè¾…åŠ©æ•°ç»„æ³•ï¼ˆC è¯­è¨€ï¼‰

```c
void rotate(int* nums, int numsSize, int k) {
    k = k % numsSize;
    int* temp = (int*)malloc(sizeof(int) * numsSize);
    
    // å¤åˆ¶å k ä¸ªå…ƒç´ åˆ°å‰ k ä¸ªä½ç½®
    for (int i = 0; i < k; i++) {
        temp[i] = nums[numsSize - k + i];
    }
    
    // å¤åˆ¶å‰ n-k ä¸ªå…ƒç´ åˆ°å n-k ä¸ªä½ç½®
    for (int i = k; i < numsSize; i++) {
        temp[i] = nums[i - k];
    }
    
    // å¤åˆ¶å›åŸæ•°ç»„
    for (int i = 0; i < numsSize; i++) {
        nums[i] = temp[i];
    }
    
    free(temp);
}
```

---

## å¤æ‚åº¦åˆ†æ

### æ–¹æ³•ä¸€ï¼šä¸‰æ¬¡åè½¬æ³•

- **æ—¶é—´å¤æ‚åº¦ï¼š** O(n)  
  æ¯ä¸ªå…ƒç´ æœ€å¤šè¢«è®¿é—®ä¸¤æ¬¡ï¼ˆåè½¬æ—¶ï¼‰ï¼Œæ€»ä½“æ˜¯ O(n)

- **ç©ºé—´å¤æ‚åº¦ï¼š** O(1)  
  ä»…ä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´ï¼ˆå‡ ä¸ªå˜é‡ï¼‰

### æ–¹æ³•äºŒï¼šç¯çŠ¶æ›¿æ¢æ³•

- **æ—¶é—´å¤æ‚åº¦ï¼š** O(n)  
  æ¯ä¸ªå…ƒç´ è¢«è®¿é—®ä¸€æ¬¡

- **ç©ºé—´å¤æ‚åº¦ï¼š** O(1)  
  ä»…ä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´

### æ–¹æ³•ä¸‰ï¼šè¾…åŠ©æ•°ç»„æ³•

- **æ—¶é—´å¤æ‚åº¦ï¼š** O(n)  
  éœ€è¦éå†æ•°ç»„ä¸¤æ¬¡ï¼ˆå¤åˆ¶åˆ°è¾…åŠ©æ•°ç»„ï¼Œå†å¤åˆ¶å›æ¥ï¼‰

- **ç©ºé—´å¤æ‚åº¦ï¼š** O(n)  
  éœ€è¦é¢å¤–çš„æ•°ç»„ç©ºé—´

---

## å¸¸è§é”™è¯¯

1. **å¿˜è®°å¤„ç† k >= numsSize çš„æƒ…å†µ**  
   å½“ k å¤§äºæ•°ç»„é•¿åº¦æ—¶ï¼Œè½®è½¬ k æ¬¡ç­‰ä»·äºè½®è½¬ `k % numsSize` æ¬¡ã€‚å¿…é¡»å…ˆç”¨å–æ¨¡è¿ç®—å¤„ç†ã€‚

2. **æ•°ç»„å£°æ˜é”™è¯¯**  
   ä½¿ç”¨ `int *b[n]` å£°æ˜çš„æ˜¯æŒ‡é’ˆæ•°ç»„ï¼Œåº”è¯¥ä½¿ç”¨ `int b[n]` æˆ–åŠ¨æ€åˆ†é… `int *b = (int*)malloc(sizeof(int) * n)`ã€‚

3. **ç´¢å¼•è®¡ç®—é”™è¯¯**  
   è½®è½¬æ—¶ç´¢å¼•è®¡ç®—è¦ä»”ç»†ï¼Œç¡®ä¿ï¼š
   - å k ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼š`nums[n - k + i]`ï¼ˆi ä» 0 åˆ° k-1ï¼‰
   - å‰ n-k ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼š`nums[i - k]`ï¼ˆi ä» k åˆ° n-1ï¼‰

4. **èµ‹å€¼æ–¹å¼é”™è¯¯**  
   ä¸èƒ½ä½¿ç”¨ `*nums = &b` è¿™æ ·çš„æ–¹å¼å¤åˆ¶æ•°ç»„ï¼Œåº”è¯¥ä½¿ç”¨å¾ªç¯é€ä¸ªå¤åˆ¶æˆ– `memcpy`ã€‚

5. **åè½¬è¾¹ç•Œé”™è¯¯**  
   ä¸‰æ¬¡åè½¬æ³•è¦æ³¨æ„è¾¹ç•Œï¼š
   - ç¬¬ä¸€æ¬¡ï¼š`reverse(nums, 0, n-1)`
   - ç¬¬äºŒæ¬¡ï¼š`reverse(nums, 0, k-1)`
   - ç¬¬ä¸‰æ¬¡ï¼š`reverse(nums, k, n-1)`

6. **ç¯çŠ¶æ›¿æ¢çš„æ­»å¾ªç¯**  
   å¿…é¡»ä½¿ç”¨ `count` å˜é‡è®°å½•å·²å¤„ç†çš„å…ƒç´ ä¸ªæ•°ï¼Œé¿å…é‡å¤å¤„ç†ã€‚

---

## æ‰©å±•æ€è€ƒ

1. **å‘å·¦è½®è½¬å¦‚ä½•å®ç°ï¼Ÿ**  
   å‘å·¦è½®è½¬ k ä¸ªä½ç½®ç­‰ä»·äºå‘å³è½®è½¬ `n - k` ä¸ªä½ç½®ã€‚

2. **é“¾è¡¨è½®è½¬ï¼ˆLeetCode 61ï¼‰**  
   é“¾è¡¨çš„è½®è½¬ä¸èƒ½ä½¿ç”¨åè½¬æ³•ï¼Œéœ€è¦ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°åˆ†å‰²ç‚¹ï¼Œç„¶åé‡æ–°è¿æ¥ã€‚

3. **äºŒç»´æ•°ç»„æ—‹è½¬ï¼ˆLeetCode 48ï¼‰**  
   æ—‹è½¬å›¾åƒæ˜¯é¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ï¼Œéœ€è¦å…ˆè½¬ç½®å†åè½¬æ¯ä¸€è¡Œã€‚

4. **å¤šæ¬¡è½®è½¬çš„ä¼˜åŒ–**  
   å¦‚æœéœ€è¦å¯¹åŒä¸€ä¸ªæ•°ç»„è¿›è¡Œå¤šæ¬¡è½®è½¬ï¼Œå¯ä»¥å…ˆå°†æ‰€æœ‰è½®è½¬æ¬¡æ•°ç´¯åŠ ï¼Œæœ€ååªæ‰§è¡Œä¸€æ¬¡ã€‚

5. **ä¸ºä»€ä¹ˆä¸‰æ¬¡åè½¬æ³•æœ‰æ•ˆï¼Ÿ**  
   è¿™æ˜¯æ•°å­¦ä¸Šçš„ä¸€ä¸ªå·§å¦™æ€§è´¨ï¼šé€šè¿‡ä¸‰æ¬¡åè½¬å¯ä»¥é‡æ–°æ’åˆ—æ•°ç»„çš„ä»»æ„è¿ç»­æ®µã€‚

---

**æ€»ç»“ï¼š** æœ¬é¢˜æ˜¯æ•°ç»„æ“ä½œçš„ç»å…¸é¢˜ç›®ï¼Œé‡ç‚¹åœ¨äºæŒæ¡**ä¸‰æ¬¡åè½¬æ³•**è¿™ä¸€ä¼˜é›…çš„ O(1) ç©ºé—´è§£æ³•ã€‚åŒæ—¶ç†è§£ç¯çŠ¶æ›¿æ¢æ³•çš„æ€æƒ³ï¼Œå¯¹äºå¤„ç†ç±»ä¼¼çš„å¾ªç¯ç§»åŠ¨é—®é¢˜å¾ˆæœ‰å¸®åŠ©ã€‚ğŸ‘


