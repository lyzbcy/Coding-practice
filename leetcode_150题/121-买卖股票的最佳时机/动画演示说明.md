# 动画演示使用说明

## 🎬 如何运行动画

1. **安装依赖**

```bash
pip install matplotlib numpy
```

2. **运行程序**

```bash
python 动画演示.py
```

3. **选择示例**

程序提供五个内置选项：

- 选项 1：示例 1（官方示例）  
  `prices = [7,1,5,3,6,4]`，最大利润 = 5

- 选项 2：示例 2（价格递减）  
  `prices = [7,6,4,3,1]`，最大利润 = 0

- 选项 3：价格递增  
  `prices = [1,2,3,4,5]`，最大利润 = 4

- 选项 4：简单示例  
  `prices = [2,4,1]`，最大利润 = 2

- 选项 5：自定义输入（支持任意价格数组）

---

## 🎮 手动控制方式

| 按键 | 功能 |
|------|------|
| 空格 / → / Enter | 下一步 |
| ← | 上一步 |
| Home | 跳转到第一步 |
| End | 跳转到最后一步 |
| Q / Esc | 退出程序 |

> ⚠️ 使用键盘前，请先点击动画窗口以确保焦点在窗口上。

---

## 📊 动画元素说明

- **绿色柱状图**：最低买入价格的位置（minPrice）
- **黄色柱状图**：当前遍历到的位置（正在检查的价格）
- **蓝色柱状图**：已经处理过的价格
- **灰色柱状图**：尚未处理的价格
- **红色箭头和标签**：显示当前计算的利润（如果为正）
- **状态信息框**：
  - 绿色框：当前最低买入价格
  - 黄色框：当前最大利润
  - 红色框：当前计算的利润

---

## 🔁 动画流程

1. **初始化**：显示 `minPrice = prices[0]`，`maxProfit = 0`，准备从第 2 天开始遍历

2. **遍历阶段**：对于每一天：
   - 检查今天的价格是否低于 `minPrice`
   - 如果更低，更新 `minPrice` 和买入日期
   - 计算今天卖出的利润：`profit = prices[i] - minPrice`
   - 如果利润更大，更新 `maxProfit`

3. **可视化展示**：
   - 用不同颜色标记最低买入价位置和当前遍历位置
   - 用红色箭头连接买入和卖出位置，显示利润
   - 实时更新状态信息

4. **结束提示**：显示最终的最大利润和最优买入卖出策略

---

## 💡 学习建议

1. **第一次观看**：选择示例 1，观察如何维护最低买入价格和计算利润

2. **第二次**：尝试示例 2，理解为什么价格递减时利润为 0

3. **第三次**：输入自定义测试，例如 `[3,2,6,5,0,3]`，观察复杂情况

4. **最后**：配合 `教学文档.md` 手动模拟代码流程，理解贪心算法的思想

---

## 🎯 关键观察点

- **最低买入价格的更新时机**：什么时候会更新 `minPrice`？
- **利润的计算方式**：为什么用当前价格减去最低买入价格？
- **最大利润的更新条件**：什么时候会更新 `maxProfit`？
- **为什么贪心算法有效**：对于任意卖出日，最优买入日一定是之前的最低价格

---

## ❓ 常见问题

- **键盘无响应？**  
  请确保点击动画窗口使其获得焦点。如果仍无效，尝试重新运行或切换 Python 终端。

- **中文显示异常？**  
  修改脚本中的 `plt.rcParams['font.sans-serif']`，换成系统可用字体。

- **无法显示窗口？**  
  在无图形界面的环境中，可以使用 `plt.savefig` 导出每一步，但更推荐在本地运行。

- **利润箭头不显示？**  
  只有当利润为正数时才会显示箭头。如果当前计算的利润为 0 或负数，不会显示箭头。

---

**祝学习顺利，玩得开心！** 🎉

