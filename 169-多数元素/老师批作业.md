## åˆæ¬¡æäº¤ä»£ç 

```c
int majorityElement(int* nums, int numsSize) {
    int a;
    int a_num;
    if(numsSize==3){
        if(nums[0]==nums[1]) return nums[0];
        else if(nums[0]==nums[2]) return nums[0];
        else return nums[1];
    }
    for(int i=0;i<(numsSize/2+1);i++){
        a=nums[i];
        a_num=i;
        for(int n=0;n<(numsSize);n++){
            if(nums[n]<a){
                int b=nums[n];
                nums[n]=a;
                nums[a_num]=b;
                a_num=n;
            }
        }
        int b=nums[i];
        nums[i]=a;
        nums[a_num]=b;
    }
    return nums[(numsSize-1)/2];
}
```

## æ‰¹é˜…æ„è§

### âœ… ä¼˜ç‚¹

1. **å‡½æ•°ç»“æ„å®Œæ•´**ï¼šå‡½æ•°ç­¾åã€å˜é‡å£°æ˜ã€è¿”å›å€¼éƒ½å·²å…·å¤‡ï¼Œä»£ç å¯ä»¥ç¼–è¯‘é€šè¿‡ã€‚
2. **æ€è·¯æ­£ç¡®**ï¼šé€šè¿‡æ’åºåè¿”å›ä¸­é—´å…ƒç´ æ¥æ‰¾å¤šæ•°å…ƒç´ ï¼Œè¿™ä¸ªæ€è·¯æ˜¯æ­£ç¡®çš„ï¼ˆå› ä¸ºå¤šæ•°å…ƒç´ è¶…è¿‡ä¸€åŠï¼Œæ’åºåä¸­é—´ä½ç½®ä¸€å®šæ˜¯å¤šæ•°å…ƒç´ ï¼‰ã€‚

### âŒ é—®é¢˜åˆ†æ

1. **è¾¹ç•Œæƒ…å†µå¤„ç†ä¸å½“**ï¼š
   - `if(numsSize==3)` æ˜¯ç¡¬ç¼–ç çš„ç‰¹æ®Šæƒ…å†µï¼Œä¸å¤Ÿé€šç”¨
   - å¯¹äºå…¶ä»–æ•°ç»„é•¿åº¦ï¼Œè¿™ä¸ªåˆ¤æ–­ä¸ä¼šæ‰§è¡Œï¼Œåº”è¯¥åˆ é™¤æˆ–æ”¹ä¸ºæ›´é€šç”¨çš„å¤„ç†

2. **æ’åºç®—æ³•å®ç°æœ‰è¯¯**ï¼š
   - ä»£ç å°è¯•å®ç°é€‰æ‹©æ’åºï¼Œä½†é€»è¾‘ä¸å®Œæ•´
   - å†…å±‚å¾ªç¯ `for(int n=0;n<(numsSize);n++)` åº”è¯¥ä» `i+1` å¼€å§‹ï¼Œè€Œä¸æ˜¯ä» 0 å¼€å§‹
   - é€‰æ‹©æ’åºåº”è¯¥æ‰¾åˆ°ä»ä½ç½® `i` å¼€å§‹çš„æœ€å°å€¼ï¼Œç„¶åä¸ `nums[i]` äº¤æ¢
   - å½“å‰å®ç°ä¸­ï¼Œ`a_num` çš„æ›´æ–°é€»è¾‘æœ‰é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´æ’åºé”™è¯¯

3. **æ’åºèŒƒå›´ä¸å®Œæ•´**ï¼š
   - å¤–å±‚å¾ªç¯åªåˆ° `numsSize/2+1`ï¼Œè¿™æ„å‘³ç€åªå¯¹å‰ä¸€åŠå…ƒç´ è¿›è¡Œäº†éƒ¨åˆ†æ’åº
   - è™½ç„¶ç†è®ºä¸Šåªéœ€è¦ä¿è¯ä¸­é—´ä½ç½® `nums[(numsSize-1)/2]` æ˜¯æ­£ç¡®çš„ï¼Œä½†å½“å‰æ’åºé€»è¾‘æ— æ³•ä¿è¯è¿™ä¸€ç‚¹

4. **æ—¶é—´å¤æ‚åº¦é—®é¢˜**ï¼š
   - å³ä½¿æ­£ç¡®å®ç°é€‰æ‹©æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ O(nÂ²)
   - ä¸ç¬¦åˆè¿›é˜¶è¦æ±‚çš„ O(n) æ—¶é—´å¤æ‚åº¦

5. **è¿”å›å€¼ç´¢å¼•é—®é¢˜**ï¼š
   - ä½¿ç”¨ `nums[(numsSize-1)/2]` å¯¹äºå¶æ•°é•¿åº¦æ•°ç»„å¯èƒ½ä¸å‡†ç¡®
   - åº”è¯¥ä½¿ç”¨ `nums[numsSize/2]` æˆ–ç¡®ä¿æ’åºåä¸­é—´ä½ç½®æ­£ç¡®

### ğŸ” ä»£ç é€»è¾‘åˆ†æ

å½“å‰æ’åºé€»è¾‘çš„é—®é¢˜ï¼š
- å†…å±‚å¾ªç¯ä» 0 å¼€å§‹ï¼Œä¼šé‡å¤å¤„ç†å·²æ’åºçš„å…ƒç´ 
- `a_num` çš„æ›´æ–°é€»è¾‘æ··ä¹±ï¼Œå¯èƒ½å¯¼è‡´å…ƒç´ ä½ç½®é”™è¯¯
- å¾ªç¯ç»“æŸåçš„äº¤æ¢æ“ä½œ `nums[i]=a; nums[a_num]=b;` å¯èƒ½è¦†ç›–é”™è¯¯çš„ä½ç½®

## æ”¹è¿›å»ºè®®

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Boyer-Moore æŠ•ç¥¨ç®—æ³•ï¼ˆæ¨èï¼ŒO(n) æ—¶é—´ O(1) ç©ºé—´ï¼‰

```c
int majorityElement(int* nums, int numsSize) {
    int candidate = nums[0];
    int count = 1;
    
    for (int i = 1; i < numsSize; i++) {
        if (count == 0) {
            candidate = nums[i];
            count = 1;
        } else if (nums[i] == candidate) {
            count++;
        } else {
            count--;
        }
    }
    
    return candidate;
}
```

**ä¼˜ç‚¹**ï¼š
- æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œåªéœ€éå†ä¸€æ¬¡
- ç©ºé—´å¤æ‚åº¦ O(1)ï¼Œåªä½¿ç”¨ä¸¤ä¸ªå˜é‡
- ä»£ç ç®€æ´ï¼Œé€»è¾‘æ¸…æ™°

### æ–¹æ³•äºŒï¼šæ’åºæ³•ï¼ˆO(n log n) æ—¶é—´ O(1) ç©ºé—´ï¼‰

#### æ–¹æ¡ˆ Aï¼šä½¿ç”¨æ ‡å‡†åº“ qsortï¼ˆæ¨èï¼‰

```c
int compare(const void* a, const void* b) {
    return *(int*)a - *(int*)b;
}

int majorityElement(int* nums, int numsSize) {
    qsort(nums, numsSize, sizeof(int), compare);
    return nums[numsSize / 2];
}
```

**è¯´æ˜**ï¼šç”±äºå¤šæ•°å…ƒç´ è¶…è¿‡ä¸€åŠï¼Œæ’åºåä¸­é—´ä½ç½®çš„å…ƒç´ ä¸€å®šæ˜¯å¤šæ•°å…ƒç´ ã€‚

#### æ–¹æ¡ˆ Bï¼šæ­£ç¡®å®ç°é€‰æ‹©æ’åºï¼ˆä»…ä½œå­¦ä¹ å‚è€ƒï¼Œä¸æ¨èï¼‰

```c
int majorityElement(int* nums, int numsSize) {
    // é€‰æ‹©æ’åºï¼šæ‰¾åˆ°å‰ numsSize/2+1 ä¸ªæœ€å°å…ƒç´ 
    for (int i = 0; i <= numsSize / 2; i++) {
        int min_idx = i;
        // ä» i+1 å¼€å§‹æ‰¾æœ€å°å€¼
        for (int j = i + 1; j < numsSize; j++) {
            if (nums[j] < nums[min_idx]) {
                min_idx = j;
            }
        }
        // äº¤æ¢
        int temp = nums[i];
        nums[i] = nums[min_idx];
        nums[min_idx] = temp;
    }
    return nums[numsSize / 2];
}
```

**è¯´æ˜**ï¼š
- é€‰æ‹©æ’åºçš„æ­£ç¡®å®ç°ï¼šå†…å±‚å¾ªç¯åº”è¯¥ä» `i+1` å¼€å§‹
- æ—¶é—´å¤æ‚åº¦ O(nÂ²)ï¼Œä¸ç¬¦åˆè¿›é˜¶è¦æ±‚ï¼Œä»…ä½œå­¦ä¹ å‚è€ƒ

### æ–¹æ³•ä¸‰ï¼šå“ˆå¸Œè¡¨ç»Ÿè®¡ï¼ˆO(n) æ—¶é—´ O(n) ç©ºé—´ï¼‰

```c
// éœ€è¦é¢å¤–çš„å“ˆå¸Œè¡¨å®ç°ï¼Œè¿™é‡Œä»…ä½œæ€è·¯è¯´æ˜
// éå†æ•°ç»„ç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°æ¬¡æ•°ï¼Œè¿”å›å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ 
```

**è¯´æ˜**ï¼šç©ºé—´å¤æ‚åº¦ä¸ç¬¦åˆè¿›é˜¶è¦æ±‚ï¼Œä½†æ€è·¯ç›´è§‚ã€‚

## æ€»ç»“

åŸä»£ç çš„ä¸»è¦é—®é¢˜ï¼š
1. **è¾¹ç•Œæƒ…å†µç¡¬ç¼–ç **ï¼š`numsSize==3` çš„ç‰¹æ®Šå¤„ç†ä¸å¤Ÿé€šç”¨
2. **æ’åºç®—æ³•å®ç°é”™è¯¯**ï¼šé€‰æ‹©æ’åºçš„é€»è¾‘ä¸å®Œæ•´ï¼Œå†…å±‚å¾ªç¯åº”è¯¥ä» `i+1` å¼€å§‹
3. **æ—¶é—´å¤æ‚åº¦ä¸ç¬¦åˆè¦æ±‚**ï¼šO(nÂ²) çš„æ’åºç®—æ³•æ— æ³•æ»¡è¶³è¿›é˜¶è¦æ±‚çš„ O(n) æ—¶é—´å¤æ‚åº¦
4. **æ’åºèŒƒå›´ä¸å®Œæ•´**ï¼šåªå¯¹å‰ä¸€åŠå…ƒç´ è¿›è¡Œéƒ¨åˆ†æ’åºï¼Œæ— æ³•ä¿è¯ä¸­é—´ä½ç½®å…ƒç´ æ­£ç¡®

**å»ºè®®**ï¼š
- å¦‚æœåšæŒä½¿ç”¨æ’åºæ–¹æ³•ï¼Œåº”è¯¥ä½¿ç”¨æ ‡å‡†åº“çš„ `qsort`ï¼ˆæ—¶é—´å¤æ‚åº¦ O(n log n)ï¼‰ï¼Œæˆ–è€…æ­£ç¡®å®ç°é€‰æ‹©æ’åº
- **ä¼˜å…ˆæŒæ¡ Boyer-Moore æŠ•ç¥¨ç®—æ³•**ï¼Œè¿™æ˜¯è§£å†³å¤šæ•°å…ƒç´ é—®é¢˜çš„ç»å…¸æ–¹æ³•ï¼Œæ—¢æ»¡è¶³æ—¶é—´å¤æ‚åº¦è¦æ±‚ï¼ˆO(n)ï¼‰ï¼Œåˆæ»¡è¶³ç©ºé—´å¤æ‚åº¦è¦æ±‚ï¼ˆO(1)ï¼‰

